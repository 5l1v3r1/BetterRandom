if: tag IS blank
cache:
  directories:
  - $HOME/.m2
  - $HOME/Library/Developer/Xcode
sudo: required
dist: trusty
serialGroup: edge
git:
  depth: 10
  quiet: true
  submodules: true # Travis FIXME: Should be overridable per job
stages:
- unit tests
- long tests
jobs:
  include:
  # OSX unit tests
  - language: java
    os: osx
    osx_image: xcode6.4 # JDK 1.8.0_45-b14, OSX 10.10
    env: OP=unit-tests JAVA8=true
    stage: unit tests
  - language: java
    os: osx
    osx_image: xcode7.3 # JDK 1.8.0_92-b14, OSX 10.11
    env: OP=unit-tests JAVA8=true
    stage: unit tests
  - language: java
    os: osx
    osx_image: xcode8.3 # JDK 1.8.0_112-b16, OSX 10.12
    env: OP=unit-tests JAVA8=true
    stage: unit tests
  - language: java
    os: osx
    osx_image: xcode9.3 # JDK 1.8.0_112-b16, OSX 10.13
    env: OP=unit-tests JAVA8=true
    stage: unit tests
  - language: java
    os: osx
    osx_image: xcode9.4 # JDK 10.0.1, OSX 10.13
    env: OP=unit-tests
    stage: unit tests
    # Linux unit tests
  - language: java
    os: linux
    jdk: openjdk8
    env: OP=unit-tests JAVA8=true
    stage: unit tests
  - language: java
    os: linux
    jdk: oraclejdk8
    env: OP=unit-tests JAVA8=true
    stage: unit tests
  - language: java
    os: linux
    jdk: oraclejdk8
    env: OP=unit-tests JAVA8=true LIMITED_CRYPTO=true
    stage: unit tests
  - language: java
    os: linux
    jdk: openjdk9
    env: OP=unit-tests
    stage: unit tests
  - language: java
    os: linux
    jdk: oraclejdk9
    env: OP=unit-tests
    stage: unit tests
  - language: java
    os: linux
    jdk: openjdk10
    env: OP=unit-tests
    stage: unit tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=unit-tests
    stage: unit tests
# Uncomment once openjdk11 and openjdk-ea are different versions
#  - language: java
#    os: linux
#    jdk: openjdk11
#    env: OP=unit-tests
#    stage: unit tests
  - language: java
    os: linux
    jdk: oraclejdk11
    env: OP=unit-tests
    stage: unit tests
  - language: java
    os: linux
    jdk: openjdk-ea
    env: OP=unit-tests
    stage: unit tests
  - language: android
    os: linux
    jdk: openjdk8
    env: OP=unit-tests ANDROID=1 JAVA8=true
    stage: unit tests
  # OSX long tests
  - language: java
    os: osx
    osx_image: xcode6.4
    env: OP=benchmark JAVA8=true
    stage: long tests
  - language: java
    os: osx
    osx_image: xcode7.3
    env: OP=benchmark JAVA8=true
    stage: long tests
  - language: java
    os: osx
    osx_image: xcode8.3
    env: OP=benchmark JAVA8=true
    stage: long tests
  - language: java
    os: osx
    osx_image: xcode9.3
    env: OP=benchmark JAVA8=true
    stage: long tests
  - language: java
    os: osx
    osx_image: xcode9.4
    env: OP=benchmark
    stage: long tests
    # Linux long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=mutation
    stage: long tests
  - language: java
    os: linux
    jdk: openjdk8
    env: OP=benchmark JAVA8=true
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk8
    env: OP=benchmark JAVA8=true
    stage: long tests
  - language: java
    os: linux
    jdk: openjdk9
    env: OP=benchmark
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk9
    env: OP=benchmark
    stage: long tests
  - language: java
    os: linux
    jdk: openjdk10
    env: OP=benchmark
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=benchmark
    stage: long tests
# Uncomment once openjdk11 and openjdk-ea are different versions
#  - language: java
#    os: linux
#    jdk: openjdk11
#    env: OP=benchmark
#    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk11
    env: OP=benchmark
    stage: long tests
  - language: java
    os: linux
    jdk: openjdk-ea
    env: OP=benchmark
    stage: long tests
  - language: android
    os: linux
    jdk: openjdk8
    env: OP=benchmark ANDROID=1 JAVA8=true
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=AesCounterRandom
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=CellularAutomatonRandom
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=Cmwc4096Random
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=MersenneTwisterRandom
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=Pcg64Random
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=Pcg128Random
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=XorShiftRandom
    stage: long tests
  - language: java
    os: linux
    jdk: oraclejdk10
    env: OP=dieharder CLASS=adapter.SingleThreadSplittableRandomAdapter
    stage: long tests
  fast_finish: true
addons:
  apt:
    packages:
      - tor
script:
- ifconfig | grep inet
- "./remove_unlimited_crypto.sh"
- "./${OP}.sh"
env:
  global:
  - secure: p6BU8Afyx81w+BwfgkjXgAC/OD6RDWQCEOusw3FSGrt0OSqmMPG3f617ndMWrTPXLekB6y1ZmaLKUSwlbG82oy961wg1rjb7KhfU39OSqzIvzynziRbzFftLX8rMH0dX8nnUc3yrCKxPhrJjnGjU41BlzMOug/i01CVn+PqUBqlSZI8Cqq6YxToGh4CX45TyHJpmx58x6MQ5LRfV3EUWaB83XBSaO2ih/tCRfqO+ryF7eav4daojtJbheONiPQ/ZfZV9TcPHftB6oYbWoGMBJ9YyD1jA4LHWondT+kkSPY2A0gOeTLFd0Ktj9suKS6qXY+QIhuStu8Ew64VOKDdOlLW804w1a438D4qf1Hr64r1lElTRhHoE0efL1vydSVby5gUJLqpru2RsNu29Ky0EovIx6i05d32xtq9kc+BNEl/SYBuUewolB9VbAmsvHGIgQG+3ZchDjcVAz4RAsVyKL1jNdzt2ZqBBlNggqcy2guCfk40IErBhP0fxxuCZy7l0NmjnhYSjaIR8AJ9525uMcbCNLlem1uUOYNpFT6O9I1U27F8Dh7I2qShlPh31UJswV3ASPqlWiGZ9HIsjf7c2OLKOke7RBcyYNn0lQ42nanMmlWhnGoQgzlYtRDY1rzbCcfz6r/xkr63QIEjVVfTjKP1fjnZmbdxsgs779BbCerY=
  - secure: kIjDcKkt6ggi1yS2g5eFI/rZ0mHZF3iQXlQTEqe/sk2pK3zvPoCjYEUZs5b7gxrb1jdsMjavf+WA0CPOtJb6KuU6GkwcFdmXlfZs0LrN5taV0TfLn+k27YvOhXpfFk2VwPaBVUYbMU/MHERKjpVu52uJS+KCaCXKmdpK8B5PVcxBIvOViufRi8ZGAZBrBaqRHvZTX0nt0KL2eULoKLhPxsuUC6fH3cJHGq1lphvPxA2SwVJVGg4NvBo3RVOu5L3QzD2eWfVQpjmBjQ7rgaxfEPqIHNZ9sThoWCNHUN+0TyFuSCleGjS5D8hHjy3bIGIcWyetxUZH3WUqDpYA9FjfuFzm978FVLDrYrdSgrDrIXu+HT7IoNNfKYC0HW2XbIuV4+exkkPRJYVrSd08HLSItqnB1yXAXZ58Z1mnCvX+ao4L3LmOsRixpw/u1bmnivZmNOA+207hAFyAROqFAaPgVc+skcpX4qcINFuL1eGv+i2cvOu489g4gqgM+7BvA/pf5cA/TsDGLDndVtmNct8O6oLK13/0UQxBP03FaTHH7BOcO5404BFZrw78X4QlteMIcI1MaDEgWoToujvA8X1XsyxUw+/iJ/AFRorF4tcOL+E/3CRSPigMWE6l1sy2Mhy+I+LD7mb3DwjiAzADGUNGXOFGvKAJLMXbeAdJhx2ul5A=
  - secure: M/ffKiA1inknBVmlzXg9VqsRJihfZyzn4oJ/JF1y4k7du/FSe1q/wpyYWrPN/qotpEfO+UZKh1UHbfMQab7DJ3wsQyvwLp9LD8hildKpmktHAcBWZNMf+MYn4NsykLitZVwve/kg2ptrvDqVN7nNsIzUVDCAxhVP6rPv5wGeaTVPtjJ6GhgSIywbBfoW344elE5KE4QzECmrnt/02Pt9A8FfJjVZ+/boaj8/0VMLgxglpMVCww57UsUdwRfwyHSusv4mcFCHQtzXyecZ6Yxw1en5UbO+I68cTq4a27JO1jnjWNX6uIT8wWpAurujd4HvfmJeITRnan01+3DBMTkAH08QffGMjPTYM4P2XcCP4uA5+XeerOiu/yxaTCq/cElbrLWbKllk2VgB+OBl2baV6jKE/fgSisofTYt0I2Ic2CiuSpXmTicTyXYGv3cHynvw5FlpgBKjw70eZh8F8GYHKmk1RprV3n7gSmpxG69EuGv7yIG1EVJOXSNU/WkrzwtQYi52LZ9C8itmczZ3oasiPI2sUvuZbJs5+UrVRW8Nbm7/3hpE5qaxZj7UgkJovd6PS2LUZC5xBvJb0qK0wVp/iLcPELd7/Sp7ewE+URsklfUqXGASt11cuMxI0kGi5ghwoG72vLqtmFkUzImFOjhJIuvSZJSn+nQi7gMGj4nEPYQ=
  - secure: mjRT9tToZDB7ZIY2TglFIyKvHs6+Rt86gUMSCagmk7sur00/XQnY/XCuPNhIyr2wow0e8QrS+peOEz+SyZLQTnoMHnpq8DCoUrrGr2XZA0aOFJVvVG3jgDZeoC0nKpQXurai7qjO+FppQPcjP5slbHz8Fas56CPUdMHo1aXdoEdmCdh9/+yjeZ/LxvDNYTPQ/jY+v55EUbDWoTUu3k3kDg6mDPpavtUCA1sBocO8i4gsu/Oh+0/j8c2uPr9OTa9ew7jPgMsGH9J7ZlsOhh7xj0TmYTDapmBINRnsWmHy6iN0o++xusGh5frVHOeE9YxKzSVpW4ZKOgAoeMIy6UeQoECmLNXECK2XoRiNMkji9aZbxajbD2Wu0Oy7rRP8lOxl71jgd4mvVV+qBMVmN/73LHzYwkVQuxbHtMbvgOVdg81f0oD1T5tOlR3B1fGBWGX44NTUg8unZNJ1vhx9ms4shVXYP682DBeqlY8/RiqUsP+2XqexQR0FjQUZQqu9iSUKUSrBoCjdEH43cyFZjVeHGwsn0MHOJDWwjkISKVPwWfj8etVm8BoVcQETF0jyBTIjCiYFKxN4i6GfY1JIy/AqCSF0jsS6UKfy/m6kHliScTde5n1tIPcRyx55vshotz7jXDrPgU7jcuo8RUyL+UrBirFgNgY3tUkWLg4PUu0CVyY=
